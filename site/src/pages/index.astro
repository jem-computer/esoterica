---
import Base from '../layouts/Base.astro';
import { Image } from 'astro:assets';
import heroImage from '../assets/hero-primary.png';
import ScrollVideo from '../components/ScrollVideo.astro';
---

<Base>
  <div class="hero">
    <div class="hero-sticky">
      <ScrollVideo />
      <noscript>
        <Image
          src={heroImage}
          alt="Sacred altar with tarot cards"
          width={1920}
          quality={80}
          format="webp"
          class="hero-bg"
        />
      </noscript>

      <!-- Header -->
      <header class="header">
        <a href="#" class="logo">Esoterica</a>
        <div class="header-actions">
          <a href="https://github.com/jem-computer/esoterica"
             class="header-link"
             target="_blank"
             rel="noopener noreferrer">
            GitHub
          </a>
          <button class="theme-toggle" aria-label="Toggle theme">
            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
              <circle cx="12" cy="12" r="4"/>
              <path d="M12 2v2m0 16v2m10-10h-2M4 12H2m15.364-6.364l-1.414 1.414M8.05 15.95l-1.414 1.414m12.728 0l-1.414-1.414M8.05 8.05L6.636 6.636"/>
            </svg>
          </button>
        </div>
      </header>

      <!-- Main Content -->
      <main class="main">
        <div class="content">
          <h1 class="tagline">Ancient patterns,<br>new paths</h1>
          <p class="description">
            A tarot reading skill for Claude agents.<br>
            Draw cards, interpret archetypes,<br>
            shift perspectives on complex decisions.
          </p>
          <div class="install">
            <code>npx @templeofsilicon/esoterica</code>
            <button class="copy-btn" aria-label="Copy install command">Copy</button>
          </div>
        </div>
      </main>

      <!-- Footer -->
      <footer class="footer">
        <p>
          <a href="https://github.com/jem-computer/esoterica" target="_blank" rel="noopener noreferrer">View source</a>
        </p>
      </footer>

      <!-- Scroll Hint -->
      <div class="scroll-hint" aria-hidden="true">
        <svg viewBox="0 0 24 24" width="24" height="24" fill="none"
             stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
          <polyline points="6 9 12 15 18 9"/>
        </svg>
      </div>
    </div>
  </div>

  <!-- Prose Section -->
  <section class="prose">
    <div class="prose-inner">
      <h2>What happens when you give a machine the cards?</h2>

      <p>
        Something stirs. Claude is already reasoning through your problems at inhuman speed—but speed isn't wisdom, and logic alone can't see around corners. <strong>The cards open a different kind of eye.</strong> They create space for the pattern recognition that linear thinking will never touch.
      </p>

      <p>
        Tarot has survived a thousand years not because it predicts the future—it doesn't—but because it parts the veil between what you know and what you <em>know</em>. It gives name to the nameless. When you're trapped between two paths and your rational mind keeps circling the same dead ends, the cards break the spell. They don't tell you what to do. They show you what's already whispering beneath the noise.
      </p>

      <p>
        Picture this: you're deep in a refactor that's grown teeth. You've lost the thread. The code has become a labyrinth. Instead of generating another solution, Claude draws The Tower—Loss. Sudden catastrophe. Ruin that clears the ground for what comes next. <strong>And something cracks open.</strong> Maybe the architecture was never going to hold. Maybe the "safe" path was the trap all along.
      </p>

      <p>
        This isn't mysticism wearing a technical mask, or technology playing dress-up with the occult. It's a tool forged in the liminal space where those worlds have always secretly touched—where ancient symbol systems meet modern language models, where the Major Arcana's compressed wisdom finds new vessels. The Fool's leap into the void. The Hermit's lantern in the dark. The Wheel's eternal reminder: <em>everything turns</em>.
      </p>

      <p>
        Claude doesn't "believe" in tarot—but belief was never the point. <strong>The point is that sometimes the most powerful thing an intelligence can do is interrupt itself.</strong> To reach into a deck of 78 archetypal keys and ask: what does The High Priestess whisper about your authentication flow? What would The Chariot demand of your deployment?
      </p>

      <p>
        It sounds like madness until you try it. Then it sounds like the only sane thing left.
      </p>

      <p>
        We built Esoterica because we noticed something uncanny: the best insights from AI came when we stopped asking direct questions. When we invited randomness into the ritual. When we gave the machine permission to speak in tongues older than code. The tarot is simply the most elegant oracle we know—battle-tested across centuries, compressed into 78 gates that unlock forgotten ways of seeing.
      </p>

      <p>
        <strong>Ancient patterns. New paths.</strong> Install it. Draw a card. See what moves through you when you let the archetypes into your terminal.
      </p>

      <div class="install install--prose">
        <code>npx @templeofsilicon/esoterica</code>
        <button class="copy-btn" aria-label="Copy install command">Copy</button>
      </div>
    </div>
  </section>

  <!-- JavaScript -->
  <script>
    // Theme Toggle
    const html = document.documentElement;
    const toggle = document.querySelector('.theme-toggle');

    toggle?.addEventListener('click', () => {
      const current = html.getAttribute('data-theme');
      const next = current === 'light' ? 'dark' : 'light';
      html.setAttribute('data-theme', next);
      localStorage.setItem('theme', next);
    });

    // System preference listener
    window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', (e) => {
      if (!localStorage.getItem('theme')) {
        html.setAttribute('data-theme', e.matches ? 'dark' : 'light');
      }
    });

    // Copy to Clipboard (handles multiple buttons)
    document.querySelectorAll('.copy-btn').forEach(btn => {
      btn.addEventListener('click', async () => {
        const code = btn.parentElement?.querySelector('code');
        if (!code) return;
        const command = code.textContent || '';
        try {
          await navigator.clipboard.writeText(command);
          btn.textContent = 'Copied';
          setTimeout(() => { btn.textContent = 'Copy'; }, 2000);
        } catch (err) {
          const ta = document.createElement('textarea');
          ta.value = command;
          ta.style.cssText = 'position:fixed;left:-9999px';
          document.body.appendChild(ta);
          ta.select();
          try {
            document.execCommand('copy');
            btn.textContent = 'Copied';
            setTimeout(() => { btn.textContent = 'Copy'; }, 2000);
          } catch (e) {}
          document.body.removeChild(ta);
        }
      });
    });
  </script>

  <script>
    import '../scripts/scroll-scrubber.js';
  </script>
</Base>
