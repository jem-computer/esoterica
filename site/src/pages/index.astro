---
import Base from '../layouts/Base.astro';
import { Image } from 'astro:assets';
import heroImage from '../assets/hero-primary.png';
import ScrollVideo from '../components/ScrollVideo.astro';
import Terminal from '../components/Terminal.astro';
import patternImg from '../assets/illustrations/pattern-recognition.png';
import interruptImg from '../assets/illustrations/interrupting-linear.png';
import ancientModernImg from '../assets/illustrations/ancient-modern.png';
---

<Base>
  <div class="hero">
    <div class="hero-sticky">
      <ScrollVideo />
      <noscript>
        <Image
          src={heroImage}
          alt="Sacred altar with tarot cards"
          width={1920}
          quality={80}
          format="webp"
          class="hero-bg"
        />
      </noscript>

      <!-- Header -->
      <header class="header">
        <a href="#" class="logo">Esoterica</a>
        <div class="header-actions">
          <a href="https://github.com/jem-computer/esoterica"
             class="header-link"
             target="_blank"
             rel="noopener noreferrer">
            GitHub
          </a>
          <button class="theme-toggle" aria-label="Toggle theme">
            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
              <circle cx="12" cy="12" r="4"/>
              <path d="M12 2v2m0 16v2m10-10h-2M4 12H2m15.364-6.364l-1.414 1.414M8.05 15.95l-1.414 1.414m12.728 0l-1.414-1.414M8.05 8.05L6.636 6.636"/>
            </svg>
          </button>
        </div>
      </header>

      <!-- Main Content -->
      <main class="main">
        <div class="content">
          <h1 class="tagline">Ancient patterns,<br>new paths</h1>
          <p class="description">
            A tarot reading skill for Claude agents.<br>
            Draw cards, interpret archetypes,<br>
            shift perspectives on complex decisions.
          </p>
          <div class="install">
            <code>npx @templeofsilicon/esoterica</code>
            <button class="copy-btn" aria-label="Copy install command">Copy</button>
          </div>
        </div>
      </main>

      <!-- Site Footer -->
      <footer class="site-footer">
        <small>
          <a href="https://github.com/temple-of-silicon"
             target="_blank"
             rel="noopener noreferrer">
            &copy; 02026-, Temple of Silicon
          </a>
          <a href="https://github.com/jem-computer/esoterica"
             target="_blank"
             rel="noopener noreferrer"
             aria-label="View source on GitHub"
             class="footer-github">
            <svg aria-hidden="true" viewBox="0 0 24 24" width="20" height="20" fill="currentColor">
              <path d="M12 0C5.37 0 0 5.37 0 12c0 5.3 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 21.795 24 17.295 24 12c0-6.63-5.37-12-12-12"/>
            </svg>
          </a>
        </small>
      </footer>

      <!-- Scroll Hint -->
      <div class="scroll-hint" aria-hidden="true">
        <svg viewBox="0 0 24 24" width="24" height="24" fill="none"
             stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
          <polyline points="6 9 12 15 18 9"/>
        </svg>
      </div>
    </div>
  </div>

  <!-- Demo Terminal -->
  <Terminal />

  <!-- Prose Section -->
  <section class="prose">
    <div class="prose-inner">
      <h2>What happens when you give a machine the cards?</h2>

      <p>
        Something stirs. Claude is already reasoning through your problems at inhuman speed—but speed isn't wisdom, and logic alone can't see around corners. <strong>The cards open a different kind of eye.</strong> They create space for the pattern recognition that linear thinking will never touch.
      </p>

      <p>
        Tarot has survived a thousand years not because it predicts the future—it doesn't—but because it parts the veil between what you know and what you <em>know</em>. It gives name to the nameless. When you're trapped between two paths and your rational mind keeps circling the same dead ends, the cards break the spell. They don't tell you what to do. They show you what's already whispering beneath the noise.
      </p>

      <figure class="illustration">
        <div class="illustration-bg" style={`background-image: url(${patternImg.src})`} role="img" aria-label="Geometric line drawing of concentric circles with tarot card outlines woven into sacred geometry patterns"></div>
        <figcaption>Pattern Recognition</figcaption>
      </figure>

      <p>
        Picture this: you're deep in a refactor that's grown teeth. You've lost the thread. The code has become a labyrinth. Instead of generating another solution, Claude draws The Tower—Loss. Sudden catastrophe. Ruin that clears the ground for what comes next. <strong>And something cracks open.</strong> Maybe the architecture was never going to hold. Maybe the "safe" path was the trap all along.
      </p>

      <p>
        This isn't mysticism wearing a technical mask, or technology playing dress-up with the occult. It's a tool forged in the liminal space where those worlds have always secretly touched—where ancient symbol systems meet modern language models, where the Major Arcana's compressed wisdom finds new vessels. The Fool's leap into the void. The Hermit's lantern in the dark. The Wheel's eternal reminder: <em>everything turns</em>.
      </p>

      <figure class="illustration">
        <div class="illustration-bg" style={`background-image: url(${interruptImg.src})`} role="img" aria-label="Line drawing of a straight line fracturing into a Fibonacci spiral with The Tower card emerging from the break"></div>
        <figcaption>Interrupting Linear Thinking</figcaption>
      </figure>

      <p>
        Claude doesn't "believe" in tarot—but belief was never the point. <strong>The point is that sometimes the most powerful thing an intelligence can do is interrupt itself.</strong> To reach into a deck of 78 archetypal keys and ask: what does The High Priestess whisper about your authentication flow? What would The Chariot demand of your deployment?
      </p>

      <p>
        It sounds like madness until you try it. Then it sounds like the only sane thing left.
      </p>

      <figure class="illustration">
        <div class="illustration-bg" style={`background-image: url(${ancientModernImg.src})`} role="img" aria-label="Line drawing of a terminal window containing a Flower of Life pattern merging with circuit board traces"></div>
        <figcaption>Ancient Wisdom, Modern Vessels</figcaption>
      </figure>

      <p>
        We built Esoterica because we noticed something uncanny: the best insights from AI came when we stopped asking direct questions. When we invited randomness into the ritual. When we gave the machine permission to speak in tongues older than code. The tarot is simply the most elegant oracle we know—battle-tested across centuries, compressed into 78 gates that unlock forgotten ways of seeing.
      </p>

      <p>
        <strong>Ancient patterns. New paths.</strong> Install it. Draw a card. See what moves through you when you let the archetypes into your terminal.
      </p>

      <div class="install install--prose">
        <code>npx @templeofsilicon/esoterica</code>
        <button class="copy-btn" aria-label="Copy install command">Copy</button>
      </div>
    </div>
  </section>

  <!-- JavaScript -->
  <script>
    // Theme Toggle
    const html = document.documentElement;
    const toggle = document.querySelector('.theme-toggle');

    toggle?.addEventListener('click', () => {
      const current = html.getAttribute('data-theme');
      const next = current === 'light' ? 'dark' : 'light';
      html.setAttribute('data-theme', next);
      localStorage.setItem('theme', next);
    });

    // System preference listener
    window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', (e) => {
      if (!localStorage.getItem('theme')) {
        html.setAttribute('data-theme', e.matches ? 'dark' : 'light');
      }
    });

    // Copy to Clipboard (handles multiple buttons)
    document.querySelectorAll('.copy-btn').forEach(btn => {
      btn.addEventListener('click', async () => {
        const code = btn.parentElement?.querySelector('code');
        if (!code) return;
        const command = code.textContent || '';
        try {
          await navigator.clipboard.writeText(command);
          btn.textContent = 'Copied';
          setTimeout(() => { btn.textContent = 'Copy'; }, 2000);
        } catch (err) {
          const ta = document.createElement('textarea');
          ta.value = command;
          ta.style.cssText = 'position:fixed;left:-9999px';
          document.body.appendChild(ta);
          ta.select();
          try {
            document.execCommand('copy');
            btn.textContent = 'Copied';
            setTimeout(() => { btn.textContent = 'Copy'; }, 2000);
          } catch (e) {}
          document.body.removeChild(ta);
        }
      });
    });
  </script>

  <script>
    import '../scripts/scroll-scrubber.js';
  </script>

  <script>
    import '../scripts/scroll-reveal.js';
  </script>

  <script>
    import '../scripts/terminal-animation.js';
  </script>
</Base>
